!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common"),require("@angular/forms"),require("load-script")):"function"==typeof define&&define.amd?define("ckeditor4-angular",["exports","@angular/core","@angular/common","@angular/forms","load-script"],e):e((t=t||self)["ckeditor4-angular"]={},t.ng.core,t.ng.common,t.ng.forms,t.loadScript)}(this,(function(t,e,n,o,i){"use strict";i=i&&i.hasOwnProperty("default")?i.default:i;var r;function a(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a}
/**
     * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.
     * For licensing, see LICENSE.md.
     */
var u=function(){function t(t,n){this.elementRef=t,this.ngZone=n,this.tagName="textarea",this.type="classic",this.ready=new e.EventEmitter,this.dataReady=new e.EventEmitter,this.change=new e.EventEmitter,this.dataChange=new e.EventEmitter,this.dragStart=new e.EventEmitter,this.dragEnd=new e.EventEmitter,this.drop=new e.EventEmitter,this.fileUploadResponse=new e.EventEmitter,this.fileUploadRequest=new e.EventEmitter,this.focus=new e.EventEmitter,this.paste=new e.EventEmitter,this.afterPaste=new e.EventEmitter,this.blur=new e.EventEmitter,this._readOnly=null,this._data=null,this._destroyed=!1,this.editorUrl="https://cdn.ckeditor.com/4.15.0/standard-all/ckeditor.js"}var n;return n=t,Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(t){if(t!==this._data)return this.instance?(this.instance.setData(t),void(this._data=this.instance.getData())):void(this._data=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.instance?this.instance.readOnly:this._readOnly},set:function(t){this.instance?this.instance.setReadOnly(t):this._readOnly=t},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var t,e=this;(t=this.editorUrl,t.length<1?Promise.reject(new TypeError("CKEditor URL must be a non-empty string.")):"CKEDITOR"in window?Promise.resolve(CKEDITOR):(r||(r=new Promise((function(e,n){i(t,(function(t){t?n(t):e(CKEDITOR),r=void 0}))}))),r)).then((function(){e._destroyed||e.ngZone.runOutsideAngular(e.createEditor.bind(e))})).catch(window.console.error)},t.prototype.ngOnDestroy=function(){var t=this;this._destroyed=!0,this.ngZone.runOutsideAngular((function(){t.instance&&(t.instance.destroy(),t.instance=null)}))},t.prototype.writeValue=function(t){this.data=t},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.createEditor=function(){var t=this,e=document.createElement(this.tagName);this.elementRef.nativeElement.appendChild(e),"divarea"===this.type&&(this.config=this.ensureDivareaPlugin(this.config||{}));var n="inline"===this.type?CKEDITOR.inline(e,this.config):CKEDITOR.replace(e,this.config);n.once("instanceReady",(function(e){t.instance=n,t.readOnly=null!==t._readOnly?t._readOnly:t.instance.readOnly,t.subscribe(t.instance);var o=n.undoManager;null!==t.data?(o&&o.lock(),n.setData(t.data,{callback:function(){t.data!==n.getData()&&(o?n.fire("change"):n.fire("dataReady")),o&&o.unlock(),t.ngZone.run((function(){t.ready.emit(e)}))}})):t.ngZone.run((function(){t.ready.emit(e)}))}))},t.prototype.subscribe=function(t){var e=this;t.on("focus",(function(t){e.ngZone.run((function(){e.focus.emit(t)}))})),t.on("paste",(function(t){e.ngZone.run((function(){e.paste.emit(t)}))})),t.on("afterPaste",(function(t){e.ngZone.run((function(){e.afterPaste.emit(t)}))})),t.on("dragend",(function(t){e.ngZone.run((function(){e.dragEnd.emit(t)}))})),t.on("dragstart",(function(t){e.ngZone.run((function(){e.dragStart.emit(t)}))})),t.on("drop",(function(t){e.ngZone.run((function(){e.drop.emit(t)}))})),t.on("fileUploadRequest",(function(t){e.ngZone.run((function(){e.fileUploadRequest.emit(t)}))})),t.on("fileUploadResponse",(function(t){e.ngZone.run((function(){e.fileUploadResponse.emit(t)}))})),t.on("blur",(function(t){e.ngZone.run((function(){e.onTouched&&e.onTouched(),e.blur.emit(t)}))})),t.on("dataReady",this.propagateChange,this),this.instance.undoManager?t.on("change",this.propagateChange,this):t.on("selectionCheck",this.propagateChange,this)},t.prototype.propagateChange=function(t){var e=this;this.ngZone.run((function(){var n=e.instance.getData();"change"===t.name?e.change.emit(t):"dataReady"===t.name&&e.dataReady.emit(t),n!==e.data&&(e._data=n,e.dataChange.emit(n),e.onChange&&e.onChange(n))}))},t.prototype.ensureDivareaPlugin=function(t){var e=t.extraPlugins,n=t.removePlugins;return e=(e=this.removePlugin(e,"divarea")||"").concat("string"==typeof e?",divarea":"divarea"),n&&n.includes("divarea")&&(n=this.removePlugin(n,"divarea"),console.warn("[CKEDITOR] divarea plugin is required to initialize editor using Angular integration.")),Object.assign({},t,{extraPlugins:e,removePlugins:n})},t.prototype.removePlugin=function(t,e){if(!t)return null;var n="string"==typeof t;return n&&(t=t.split(",")),t=t.filter((function(t){return t!==e})),n&&(t=t.join(",")),t},t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.NgZone}]},a([e.Input()],t.prototype,"config",void 0),a([e.Input()],t.prototype,"tagName",void 0),a([e.Input()],t.prototype,"type",void 0),a([e.Input()],t.prototype,"data",null),a([e.Input()],t.prototype,"readOnly",null),a([e.Output()],t.prototype,"ready",void 0),a([e.Output()],t.prototype,"dataReady",void 0),a([e.Output()],t.prototype,"change",void 0),a([e.Output()],t.prototype,"dataChange",void 0),a([e.Output()],t.prototype,"dragStart",void 0),a([e.Output()],t.prototype,"dragEnd",void 0),a([e.Output()],t.prototype,"drop",void 0),a([e.Output()],t.prototype,"fileUploadResponse",void 0),a([e.Output()],t.prototype,"fileUploadRequest",void 0),a([e.Output()],t.prototype,"focus",void 0),a([e.Output()],t.prototype,"paste",void 0),a([e.Output()],t.prototype,"afterPaste",void 0),a([e.Output()],t.prototype,"blur",void 0),a([e.Input()],t.prototype,"editorUrl",void 0),t=n=a([e.Component({selector:"ckeditor",template:"<ng-template></ng-template>",providers:[{provide:o.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return n})),multi:!0}]})],t)}(),s=function(){function t(){}return t=a([e.NgModule({imports:[o.FormsModule,n.CommonModule],declarations:[u],exports:[u]})],t)}();
/**
     * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.
     * For licensing, see LICENSE.md.
     */
/**
     * @license Copyright (c) 2003-2020, CKSource - Frederico Knabben. All rights reserved.
     * For licensing, see LICENSE.md.
     */t.CKEditorComponent=u,t.CKEditorModule=s,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=ckeditor4-angular.umd.min.js.map